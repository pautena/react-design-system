import{r as p}from"./index-CFahbR6w.js";import{c as x,a as yo,g as go}from"./generateUtilityClasses-D-SxHVPw.js";import{i as vo}from"./isHostComponent-DVu5iVWx.js";import{o as K,u as k}from"./useSlot-CxWRxdBG.js";import{j as z}from"./jsx-runtime-D_zvdyIk.js";import{u as bo}from"./DefaultPropsProvider-CoDhPOBZ.js";import{o as Q}from"./ownerWindow-DTHMI0Ng.js";import{d as Eo}from"./debounce-Be36O1Ab.js";import{G as wo}from"./Grow-n1DXLUVe.js";import{s as S,a as Co}from"./memoTheme-DMhdsnBH.js";import{M as To}from"./Modal-CIPqqYkl.js";import{P as Ro}from"./Paper-CKIh7Zii.js";function Ao(o,t){if(!o)return t;if(typeof o=="function"||typeof t=="function")return l=>{const n=typeof t=="function"?t(l):t,e=typeof o=="function"?o({...l,...n}):o,g=x(l==null?void 0:l.className,n==null?void 0:n.className,e==null?void 0:e.className);return{...n,...e,...!!g&&{className:g},...(n==null?void 0:n.style)&&(e==null?void 0:e.style)&&{style:{...n.style,...e.style}},...(n==null?void 0:n.sx)&&(e==null?void 0:e.sx)&&{sx:[...Array.isArray(n.sx)?n.sx:[n.sx],...Array.isArray(e.sx)?e.sx:[e.sx]]}}};const s=t,y=x(s==null?void 0:s.className,o==null?void 0:o.className);return{...t,...o,...!!y&&{className:y},...(s==null?void 0:s.style)&&(o==null?void 0:o.style)&&{style:{...s.style,...o.style}},...(s==null?void 0:s.sx)&&(o==null?void 0:o.sx)&&{sx:[...Array.isArray(s.sx)?s.sx:[s.sx],...Array.isArray(o.sx)?o.sx:[o.sx]]}}}function Oo(o){return yo("MuiPopover",o)}go("MuiPopover",["root","paper"]);function Z(o,t){let s=0;return typeof t=="number"?s=t:t==="center"?s=o.height/2:t==="bottom"&&(s=o.height),s}function _(o,t){let s=0;return typeof t=="number"?s=t:t==="center"?s=o.width/2:t==="right"&&(s=o.width),s}function V(o){return[o.horizontal,o.vertical].map(t=>typeof t=="number"?`${t}px`:t).join(" ")}function N(o){return typeof o=="function"?o():o}const ko=o=>{const{classes:t}=o;return Co({root:["root"],paper:["paper"]},Oo,t)},zo=S(To,{name:"MuiPopover",slot:"Root",overridesResolver:(o,t)=>t.root})({}),No=S(Ro,{name:"MuiPopover",slot:"Paper",overridesResolver:(o,t)=>t.paper})({position:"absolute",overflowY:"auto",overflowX:"hidden",minWidth:16,minHeight:16,maxWidth:"calc(100% - 32px)",maxHeight:"calc(100% - 32px)",outline:0}),Bo=p.forwardRef(function(t,s){const y=bo({props:t,name:"MuiPopover"}),{action:l,anchorEl:n,anchorOrigin:e={vertical:"top",horizontal:"left"},anchorPosition:g,anchorReference:v="anchorEl",children:oo,className:to,container:io,elevation:M=8,marginThreshold:a=16,open:u,PaperProps:so={},slots:P={},slotProps:C={},transformOrigin:b={vertical:"top",horizontal:"left"},TransitionComponent:W,transitionDuration:T="auto",TransitionProps:j={},disableScrollLock:R=!1,...no}=y,A=p.useRef(),E={...y,anchorOrigin:e,anchorReference:v,elevation:M,marginThreshold:a,transformOrigin:b,TransitionComponent:W,transitionDuration:T,TransitionProps:j},H=ko(E),L=p.useCallback(()=>{if(v==="anchorPosition")return g;const i=N(n),r=(i&&i.nodeType===1?i:K(A.current).body).getBoundingClientRect();return{top:r.top+Z(r,e.vertical),left:r.left+_(r,e.horizontal)}},[n,e.horizontal,e.vertical,g,v]),F=p.useCallback(i=>({vertical:Z(i,b.vertical),horizontal:_(i,b.horizontal)}),[b.horizontal,b.vertical]),U=p.useCallback(i=>{const c={width:i.offsetWidth,height:i.offsetHeight},r=F(c);if(v==="none")return{top:null,left:null,transformOrigin:V(r)};const w=L();let d=w.top-r.vertical,h=w.left-r.horizontal;const D=d+c.height,X=h+c.width,Y=Q(N(n)),q=Y.innerHeight-a,J=Y.innerWidth-a;if(a!==null&&d<a){const f=d-a;d-=f,r.vertical+=f}else if(a!==null&&D>q){const f=D-q;d-=f,r.vertical+=f}if(a!==null&&h<a){const f=h-a;h-=f,r.horizontal+=f}else if(X>J){const f=X-J;h-=f,r.horizontal+=f}return{top:`${Math.round(d)}px`,left:`${Math.round(h)}px`,transformOrigin:V(r)}},[n,v,L,F,a]),[eo,$]=p.useState(u),m=p.useCallback(()=>{const i=A.current;if(!i)return;const c=U(i);c.top!==null&&i.style.setProperty("top",c.top),c.left!==null&&(i.style.left=c.left),i.style.transformOrigin=c.transformOrigin,$(!0)},[U]);p.useEffect(()=>(R&&window.addEventListener("scroll",m),()=>window.removeEventListener("scroll",m)),[n,R,m]);const ro=()=>{m()},co=()=>{$(!1)};p.useEffect(()=>{u&&m()}),p.useImperativeHandle(l,()=>u?{updatePosition:()=>{m()}}:null,[u,m]),p.useEffect(()=>{if(!u)return;const i=Eo(()=>{m()}),c=Q(n);return c.addEventListener("resize",i),()=>{i.clear(),c.removeEventListener("resize",i)}},[n,u,m]);let G=T;const O={slots:{transition:W,...P},slotProps:{transition:j,paper:so,...C}},[I,ao]=k("transition",{elementType:wo,externalForwardedProps:O,ownerState:E,getSlotProps:i=>({...i,onEntering:(c,r)=>{var w;(w=i.onEntering)==null||w.call(i,c,r),ro()},onExited:c=>{var r;(r=i.onExited)==null||r.call(i,c),co()}}),additionalProps:{appear:!0,in:u}});T==="auto"&&!I.muiSupportAuto&&(G=void 0);const fo=io||(n?K(N(n)).body:void 0),[B,{slots:po,slotProps:mo,...uo}]=k("root",{ref:s,elementType:zo,externalForwardedProps:{...O,...no},shouldForwardComponentProp:!0,additionalProps:{slots:{backdrop:P.backdrop},slotProps:{backdrop:Ao(typeof C.backdrop=="function"?C.backdrop(E):C.backdrop,{invisible:!0})},container:fo,open:u},ownerState:E,className:x(H.root,to)}),[lo,ho]=k("paper",{ref:A,className:H.paper,elementType:No,externalForwardedProps:O,shouldForwardComponentProp:!0,additionalProps:{elevation:M,style:eo?void 0:{opacity:0}},ownerState:E});return z.jsx(B,{...uo,...!vo(B)&&{slots:po,slotProps:mo,disableScrollLock:R},children:z.jsx(I,{...ao,timeout:G,children:z.jsx(lo,{...ho,children:oo})})})});export{Bo as P,No as a,Ao as m};
