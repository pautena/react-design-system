import{e as M,r as m,b as yo,j as R}from"./iframe-EZlCblT_.js";import{a as go,g as vo}from"./generateUtilityClasses-CoM_PQv9.js";import{u as N,i as Po}from"./useSlot-JprQW5-3.js";import{o as V}from"./ownerDocument-DW-IO8s5.js";import{o as Z}from"./ownerWindow-HkKU3E4x.js";import{d as xo}from"./debounce-Be36O1Ab.js";import{G as bo}from"./Grow-CXlVsDrX.js";import{s as to,a as wo}from"./memoTheme-CjfLGB6G.js";import{M as Eo}from"./Modal-DotIMusy.js";import{P as Co}from"./Paper-C0CMzwYM.js";function To(o,t){const n=o.charCodeAt(2);return o[0]==="o"&&o[1]==="n"&&n>=65&&n<=90&&typeof t=="function"}function Ao(o,t){if(!o)return t;function n(l,r){const s={};return Object.keys(r).forEach(p=>{To(p,r[p])&&typeof l[p]=="function"&&(s[p]=(...g)=>{l[p](...g),r[p](...g)})}),s}if(typeof o=="function"||typeof t=="function")return l=>{const r=typeof t=="function"?t(l):t,s=typeof o=="function"?o({...l,...r}):o,p=M(l?.className,r?.className,s?.className),g=n(s,r);return{...r,...s,...g,...!!p&&{className:p},...r?.style&&s?.style&&{style:{...r.style,...s.style}},...r?.sx&&s?.sx&&{sx:[...Array.isArray(r.sx)?r.sx:[r.sx],...Array.isArray(s.sx)?s.sx:[s.sx]]}}};const f=t,C=n(o,f),c=M(f?.className,o?.className);return{...t,...o,...C,...!!c&&{className:c},...f?.style&&o?.style&&{style:{...f.style,...o.style}},...f?.sx&&o?.sx&&{sx:[...Array.isArray(f.sx)?f.sx:[f.sx],...Array.isArray(o.sx)?o.sx:[o.sx]]}}}function Oo(o){return go("MuiPopover",o)}vo("MuiPopover",["root","paper"]);function _(o,t){let n=0;return typeof t=="number"?n=t:t==="center"?n=o.height/2:t==="bottom"&&(n=o.height),n}function S(o,t){let n=0;return typeof t=="number"?n=t:t==="center"?n=o.width/2:t==="right"&&(n=o.width),n}function oo(o){return[o.horizontal,o.vertical].map(t=>typeof t=="number"?`${t}px`:t).join(" ")}function E(o){return typeof o=="function"?o():o}const zo=o=>{const{classes:t}=o;return wo({root:["root"],paper:["paper"]},Oo,t)},Ro=to(Eo,{name:"MuiPopover",slot:"Root"})({}),No=to(Co,{name:"MuiPopover",slot:"Paper"})({position:"absolute",overflowY:"auto",overflowX:"hidden",minWidth:16,minHeight:16,maxWidth:"calc(100% - 32px)",maxHeight:"calc(100% - 32px)",outline:0}),Go=m.forwardRef(function(t,n){const f=yo({props:t,name:"MuiPopover"}),{action:C,anchorEl:c,anchorOrigin:l={vertical:"top",horizontal:"left"},anchorPosition:r,anchorReference:s="anchorEl",children:p,className:g,container:eo,elevation:H=8,marginThreshold:u=16,open:y,PaperProps:no={},slots:j={},slotProps:w={},transformOrigin:x={vertical:"top",horizontal:"left"},TransitionComponent:D,transitionDuration:T="auto",TransitionProps:W={},disableScrollLock:A=!1,...so}=f,O=m.useRef(),b={...f,anchorOrigin:l,anchorReference:s,elevation:H,marginThreshold:u,transformOrigin:x,TransitionComponent:D,transitionDuration:T,TransitionProps:W},L=zo(b),k=m.useCallback(()=>{if(s==="anchorPosition")return r;const e=E(c),a=(e&&e.nodeType===1?e:V(O.current).body).getBoundingClientRect();return{top:a.top+_(a,l.vertical),left:a.left+S(a,l.horizontal)}},[c,l.horizontal,l.vertical,r,s]),F=m.useCallback(e=>({vertical:_(e,x.vertical),horizontal:S(e,x.horizontal)}),[x.horizontal,x.vertical]),U=m.useCallback(e=>{const i={width:e.offsetWidth,height:e.offsetHeight},a=F(i);if(s==="none")return{top:null,left:null,transformOrigin:oo(a)};const X=k();let v=X.top-a.vertical,P=X.left-a.horizontal;const Y=v+i.height,q=P+i.width,J=Z(E(c)),K=J.innerHeight-u,Q=J.innerWidth-u;if(u!==null&&v<u){const d=v-u;v-=d,a.vertical+=d}else if(u!==null&&Y>K){const d=Y-K;v-=d,a.vertical+=d}if(u!==null&&P<u){const d=P-u;P-=d,a.horizontal+=d}else if(q>Q){const d=q-Q;P-=d,a.horizontal+=d}return{top:`${Math.round(v)}px`,left:`${Math.round(P)}px`,transformOrigin:oo(a)}},[c,s,k,F,u]),[ro,$]=m.useState(y),h=m.useCallback(()=>{const e=O.current;if(!e)return;const i=U(e);i.top!==null&&e.style.setProperty("top",i.top),i.left!==null&&(e.style.left=i.left),e.style.transformOrigin=i.transformOrigin,$(!0)},[U]);m.useEffect(()=>(A&&window.addEventListener("scroll",h),()=>window.removeEventListener("scroll",h)),[c,A,h]);const io=()=>{h()},ao=()=>{$(!1)};m.useEffect(()=>{y&&h()}),m.useImperativeHandle(C,()=>y?{updatePosition:()=>{h()}}:null,[y,h]),m.useEffect(()=>{if(!y)return;const e=xo(()=>{h()}),i=Z(E(c));return i.addEventListener("resize",e),()=>{e.clear(),i.removeEventListener("resize",e)}},[c,y,h]);let G=T;const z={slots:{transition:D,...j},slotProps:{transition:W,paper:no,...w}},[I,co]=N("transition",{elementType:bo,externalForwardedProps:z,ownerState:b,getSlotProps:e=>({...e,onEntering:(i,a)=>{e.onEntering?.(i,a),io()},onExited:i=>{e.onExited?.(i),ao()}}),additionalProps:{appear:!0,in:y}});T==="auto"&&!I.muiSupportAuto&&(G=void 0);const lo=eo||(c?V(E(c)).body:void 0),[B,{slots:fo,slotProps:po,...uo}]=N("root",{ref:n,elementType:Ro,externalForwardedProps:{...z,...so},shouldForwardComponentProp:!0,additionalProps:{slots:{backdrop:j.backdrop},slotProps:{backdrop:Ao(typeof w.backdrop=="function"?w.backdrop(b):w.backdrop,{invisible:!0})},container:lo,open:y},ownerState:b,className:M(L.root,g)}),[mo,ho]=N("paper",{ref:O,className:L.paper,elementType:No,externalForwardedProps:z,shouldForwardComponentProp:!0,additionalProps:{elevation:H,style:ro?void 0:{opacity:0}},ownerState:b});return R.jsx(B,{...uo,...!Po(B)&&{slots:fo,slotProps:po,disableScrollLock:A},children:R.jsx(I,{...co,timeout:G,children:R.jsx(mo,{...ho,children:p})})})});export{Go as P,No as a,Ao as m};
